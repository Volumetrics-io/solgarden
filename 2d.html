<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Sol Garden</title>
    <style>
        * {
            border: none;
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        #root {
            position: relative;
            border: 1px solid red;
            width: 800;
            height: 800;
        }
    </style>
</head>

<body>
    <main id="root"></main>

    <script src="heightmap.js"></script>
    <script>

        window.onload = () => {

            const comp = {
                rows: 5,
                cols: 5,
                floors: 5
            }

            const heightMap = Array.from({ length: comp.rows }, (_, x) =>
                Array.from({ length: comp.cols }, (_, y) => Math.floor(smoothNoise(x * 0.5, y * 0.5) * comp.floors))
            );

            const root = document.querySelector('#root');
            const tilemap = [];

            for (let f = 0; f < comp.floors; f++) {
                const floor = [];

                for (let r = 0; r < comp.rows; r++) {
                    const row = [];

                    for (let c = 0; c < comp.cols; c++) {

                        // let offsetRow = r - (comp.rows * scale) / 2;
                        // let offsetCol = c - (comp.cols * scale) / 2;
                        // let offsetFloor = f;

                        let isTop = (f === heightMap[r][c]);

                        if (f <= heightMap[r][c]) {

                            let tile = document.createElement("div");
                            Object.assign(tile.style, {
                                top: r + "px",
                                left: c + "px",
                                backgroundColor: 'rebeccaPurple',
                                content: 'foo'
                            })

                            root.append(tile);

                            row.push(tile);
                        }

                    }

                    floor.push(row);
                }

                tilemap.push(floor);

            }
        }

    </script>
</body>

</html>